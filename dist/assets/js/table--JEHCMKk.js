import{d as e,r as t,z as a,f as l,o,k as n,j as i,a as s,G as r,v as d,a2 as u,$ as c,g as p,Z as g,l as m,m as f,w as b,N as h,F as w,t as x,i as v,A as k,h as y,a3 as S,a0 as _,K as C,J as z,B as j,M as B,a4 as D,a5 as $}from"./index-3dI-2cKY.js";import{_ as N}from"./index-ejY0EYR7.js";import{_ as T}from"./plugin-vueexport-helper-NGi3vMWx.js";import{_ as A}from"./index-TXPRxx_h.js";const G=e({__name:"index",props:{pageObject:{}},emits:["pageChange"],setup(e,{emit:s}){const r=e,d=s,u=t({pageNumber:1,pageSize:10,total:0,hideOnSinglePage:!1,background:!0,small:!1,disabled:!1,pageSizes:[10,20,50,60,100],layout:"total, sizes, prev, pager, next, jumper"});function c(e){u.value.pageSize=e,d("pageChange",{pageNumber:u.value.pageNumber,pageSize:e})}function p(e){u.value.pageNumber=e,d("pageChange",{pageNumber:e,pageSize:u.value.pageSize})}return a((()=>r.pageObject),(e=>{Object.assign(u.value,e)}),{immediate:!0,deep:!0}),(e,t)=>{const a=l("el-pagination");return o(),n(a,{"current-page":i(u).pageNumber,"onUpdate:currentPage":t[0]||(t[0]=e=>i(u).pageNumber=e),"page-size":i(u).pageSize,"onUpdate:pageSize":t[1]||(t[1]=e=>i(u).pageSize=e),"page-sizes":i(u).pageSizes,small:i(u).small,disabled:i(u).disabled,background:i(u).background,layout:i(u).layout,total:i(u).total,"prev-text":"上一页","next-text":"下一页",onSizeChange:c,onCurrentChange:p},null,8,["current-page","page-size","page-sizes","small","disabled","background","layout","total"])}}}),O={class:"data-grid"},R={key:0,class:"data-grid-top px-2"},W={key:0,class:"top-action-bar"},F={key:1,class:"top-setting"},I=["onClick"],L={key:2},P={key:0},V={key:0,class:"data-grid-bottom-right"},U=T(e({name:"XtTable",__name:"index",props:{data:{},customConfig:{default:()=>({})},pageObject:{default:()=>({})},paginationAlign:{default:"right"}},emits:["pageChange","singleSelect","multipleSelect"],setup(e,{expose:a,emit:D}){const $=e,T=D,A=s({showDataGridTop:!0,showDataGridTopRight:!0,showDataGridTopLeft:!0,showDataGridBottom:!0,showPagination:!0,showSingleSelection:!1,showIndex:!0,showMultipleSelection:!1,showOperation:!0,indexAlignFixed:"left",operationAlignFixed:"right",operationAlign:"center",align:"center",selectionWidth:40,indexWidth:60,operationWidth:200,columns:[],rowButtons:[],selectable:()=>!0,combineBtnLink:!1});r((()=>{Object.assign(A,$.customConfig),E.value=A.columns.filter((e=>!e.deleted)),E.value.forEach((e=>{!1!==e.show&&U.value.push(e.prop)}))}));const U=t([]),E=t([]);const J=t(null),M=t(-1);function H(e){A.showSingleSelection&&(M.value=e.index),T("singleSelect",e)}const K=d((()=>A.rowButtons&&A.rowButtons.length?A.rowButtons.filter((e=>!e.putInCombineBox)):[])),X=d((()=>A.rowButtons&&A.rowButtons.length?A.rowButtons.filter((e=>e.putInCombineBox)):[]));let Z=[];function q(e){T("multipleSelect",e)}u((()=>{Z=[]}));const Q=d((()=>{let e="";switch($.paginationAlign){case"left":e="flex-start";break;case"center":e="center";break;default:e="flex-end"}return e}));function Y(e){T("pageChange",JSON.parse(JSON.stringify(e)))}return a({clearSelection:function(){var e;null==(e=J.value)||e.clearSelection()},toggleRowSelection:function(e,t){var a;null==(a=J.value)||a.toggleRowSelection(e,t)},toggleAllSelection:function(){var e;null==(e=J.value)||e.toggleAllSelection()},toggleRowExpansion:function(e,t){var a;null==(a=J.value)||a.toggleRowExpansion(e,t)},setCurrentRow:function(e){var t;null==(t=J.value)||t.setCurrentRow(e)},clearSort:function(){var e;null==(e=J.value)||e.clearSort()},clearFilter:function(e){var t;null==(t=J.value)||t.clearFilter(e)},doLayout:function(){var e;null==(e=J.value)||e.doLayout()},sort:function(e,t){var a;null==(a=J.value)||a.sort(e,t)}}),(e,t)=>{const a=N,s=l("el-checkbox"),r=l("el-checkbox-group"),d=l("el-popover"),u=l("el-radio"),D=l("el-table-column"),$=l("el-button"),T=l("el-dropdown-item"),ee=l("el-dropdown-menu"),te=l("el-dropdown"),ae=l("el-table"),le=G,oe=c("auth");return o(),p("div",O,[i(A).showDataGridTop?(o(),p("div",R,[g(e.$slots,"top",{},(()=>[i(A).showDataGridTopLeft?(o(),p("div",W,[g(e.$slots,"top-left",{},void 0,!0)])):m("",!0),i(A).showDataGridTopRight?(o(),p("div",F,[g(e.$slots,"top-right",{},(()=>[f(d,{placement:"bottom-end",trigger:"click"},{reference:b((()=>[f(a,{name:"ep:operation",class:"cursor-pointer text-xl"})])),default:b((()=>[f(r,{modelValue:i(U),"onUpdate:modelValue":t[0]||(t[0]=e=>h(U)?U.value=e:null),class:"filter-column"},{default:b((()=>[(o(!0),p(w,null,k(i(E),((e,t)=>(o(),n(s,{key:t,label:e.prop},{default:b((()=>[v(x(e.label),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])),_:1})]),!0)])):m("",!0)]),!0)])):m("",!0),y("div",{class:j(["data-grid-table",i(A).showDataGridTop?"mt-2":""])},[f(ae,_({ref_key:"dataGridRef",ref:J,data:e.data,"highlight-current-row":"",border:"",class:"xt-table"},e.$attrs,{onCurrentChange:H,onSelectionChange:q}),{default:b((()=>[i(A).showSingleSelection?(o(),n(D,{key:0,width:i(A).selectionWidth,align:i(A).align},{default:b((e=>[f(u,{modelValue:i(M),"onUpdate:modelValue":t[1]||(t[1]=e=>h(M)?M.value=e:null),label:e.$index},null,8,["modelValue","label"])])),_:1},8,["width","align"])):m("",!0),i(A).showMultipleSelection?(o(),n(D,{key:1,type:"selection",width:i(A).selectionWidth,align:i(A).align,selectable:i(A).selectable},null,8,["width","align","selectable"])):m("",!0),i(A).showIndex?(o(),n(D,{key:2,fixed:i(A).indexAlignFixed,type:"index",width:i(A).indexWidth,label:"序号",align:i(A).align},null,8,["fixed","width","align"])):m("",!0),(o(!0),p(w,null,k(i(E),((t,a)=>(o(),p(w,{key:a},[i(U).includes(t.prop)?(o(),n(D,{key:0,align:t.align,width:t.width,"min-width":t.minWidth,label:t.label,sortable:t.sortable?!t.headerSlot:t.sortable,prop:t.prop,"show-overflow-tooltip":""},S({default:b((a=>[t.slot?g(e.$slots,t.slot,{key:0,row:a.row,prop:t.prop,column:a.column,index:a.$index},void 0,!0):t.click&&"function"==typeof t.click?g(e.$slots,"default",{key:1},(()=>[y("span",{class:"cursor-pointer text-[var(--el-color-primary)]",onClick:e=>t.click(a.row,a.$index)},x(0===a.row[t.prop]?0:a.row[t.prop]||"--"),9,I)]),!0):(o(),p("span",L,x(0===a.row[t.prop]?0:a.row[t.prop]||"--"),1))])),_:2},[t.headerSlot?{name:"header",fn:b((({column:a,$index:l})=>[g(e.$slots,t.headerSlot,{column:a,index:l},void 0,!0)])),key:"0"}:void 0]),1032,["align","width","min-width","label","sortable","prop"])):m("",!0)],64)))),128)),i(K).length||i(X).length?(o(),n(D,{key:3,fixed:i(A).operationAlignFixed,width:i(A).operationWidth,align:i(A).operationAlign,label:"操作"},{default:b((e=>[(o(!0),p(w,null,k(i(K),((t,a)=>(o(),p(w,{key:a},["function"!=typeof t.isShow||t.isShow(e.row)?C((o(),n($,_({key:0,disabled:"function"==typeof t.isDisabled&&t.isDisabled(e.row),title:"function"==typeof t.showTitle?t.showTitle(e.row):""},t.attrs,{onClick:a=>t.click(e.row,e.$index)}),{default:b((()=>[t.onlyIcon?m("",!0):(o(),p("span",P,x(t.name),1))])),_:2},1040,["disabled","title","onClick"])),[[oe,t.auth?t.auth:""]]):m("",!0)],64)))),128)),i(X).length?(o(),n(te,{key:0,ref:"combineBoxDropdownRef","hide-on-click":!0,class:"combine-box-dropdown",trigger:"click",placement:"bottom-start"},{dropdown:b((()=>[f(ee,{class:"combine-box-dropdown-menu"},{default:b((()=>[(o(!0),p(w,null,k(i(X),((t,a)=>(o(),n(T,_({key:a,title:"function"==typeof t.showTitle?t.showTitle(e.row):"",disabled:"function"==typeof t.isDisabled&&t.isDisabled(e.row)},t.attrs,{onClick:z((a=>function(e,t,a){if(X.value.length){let l=!1;if("function"==typeof e.isDisabled&&(l=e.isDisabled(t)||!1),l)return void Z[a].show();e.click(t,a)}}(t,e.row,e.$index)),["stop"])}),{default:b((()=>[v(x(t.name),1)])),_:2},1040,["title","disabled","onClick"])))),128))])),_:2},1024)])),default:b((()=>[f($,{link:i(A).combineBtnLink,type:"primary",plain:""},{default:b((()=>[v(" 更多 ")])),_:1},8,["link"])])),_:2},1536)):m("",!0)])),_:1},8,["fixed","width","align"])):m("",!0)])),_:3},16,["data"])],2),i(A).showDataGridBottom?(o(),p("div",{key:1,class:"data-grid-bottom mt-2 flex px-4",style:B({justifyContent:i(Q)})},[g(e.$slots,"bottom",{},(()=>[i(A).showPagination?(o(),p("div",V,[g(e.$slots,"bottom-left",{},(()=>[f(le,{"page-object":e.pageObject,onPageChange:Y},null,8,["page-object"])]),!0)])):m("",!0)]),!0)],4)):m("",!0)])}}}),[["__scopeId","data-v-fb0a6c23"]]),E=y("div",{class:"mb-3 text-2xl"}," 表格封装-以配置项驱动的表格 ",-1),J=y("div",null," 具体配置请在项目中查看 ",-1),M={class:"flex items-center justify-center"},H={class:"flex items-center justify-center"},K={class:"ml-3"},X=e({__name:"table",setup(e){const a=s({columns:[{label:"日期",prop:"date",align:"center",sortable:!1,slot:"date",headerSlot:"dateHeader"},{label:"姓名",prop:"name",align:"center",sortable:!1,click:e=>{D.success("点击了姓名")}},{label:"地址",prop:"address",align:"center",sortable:!1}],rowButtons:[{name:"查看",click:e=>{},attr:{type:"primary"}},{name:"添加",click:e=>{},putInCombineBox:!0}]}),n=t([]),d=s({total:0,pageSize:10,pageNumber:1});function u(){$({current:d.pageNumber-1,pageSize:d.pageSize}).then((e=>{n.value=e.result.rows,d.total=e.result.total}))}function c(e){d.pageSize=e.pageSize,d.pageNumber=e.pageNumber,u()}return r((()=>{u()})),(e,t)=>{const s=A,r=l("el-button"),u=N,g=l("el-icon"),m=U;return o(),p(w,null,[f(s,null,{default:b((()=>[E,J])),_:1}),f(s,null,{default:b((()=>[f(m,{data:i(n),"custom-config":i(a),"page-object":i(d),onPageChange:c},{"top-left":b((()=>[y("div",null,[f(r,{type:"primary"},{default:b((()=>[v(" 我是自定义内容 ")])),_:1})])])),dateHeader:b((({column:e,index:t})=>[y("div",M,[f(g,{size:15},{default:b((()=>[f(u,{name:"ep:alarm-clock"})])),_:1}),v(" "+x(t)+"-"+x(e.label)+" 自定义表头 ",1)])])),date:b((({row:e})=>[y("div",H,[f(g,{size:20},{default:b((()=>[f(u,{name:"ep:alarm-clock"})])),_:1}),y("span",K,x(e.date)+"-自定义内容",1)])])),_:1},8,["data","custom-config","page-object"])])),_:1})],64)}}});export{X as default};
