import{d as e,r as t,F as a,o as l,j as o,i as n,ax as i,a as s,P as r,z as u,aB as d,ar as p,f as c,ap as g,k as m,l as f,w as b,X as h,G as w,H as x,g as v,aC as k,t as y,T as S,as as j,S as C,h as _,I as z,V as B,aD as D,aE as $,aF as G,aG as N,am as T,q as A,a2 as O,a3 as R,a4 as F,an as I,aH as W,aI as P,E as V}from"./index-CCR-krXi.js";/* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                     *//* empty css                        *//* empty css                    */import"./el-tooltip-l0sNRNKZ.js";/* empty css                  *//* empty css                         *//* empty css                 */import{_ as E}from"./index-BumZ7-TY.js";import{_ as L}from"./plugin-vueexport-helper-BCo6x5W8.js";import{_ as H}from"./index-eAyt8zx4.js";const U=e({__name:"index",props:{pageObject:{}},emits:["pageChange"],setup(e,{emit:s}){const r=e,u=s,d=t({pageNumber:1,pageSize:10,total:0,hideOnSinglePage:!1,background:!0,small:!1,disabled:!1,pageSizes:[10,20,50,60,100],layout:"total, sizes, prev, pager, next, jumper"});function p(e){d.value.pageSize=e,u("pageChange",{pageNumber:d.value.pageNumber,pageSize:e})}function c(e){d.value.pageNumber=e,u("pageChange",{pageNumber:e,pageSize:d.value.pageSize})}return a((()=>r.pageObject),(e=>{Object.assign(d.value,e)}),{immediate:!0,deep:!0}),(e,t)=>{const a=i;return l(),o(a,{"current-page":n(d).pageNumber,"onUpdate:currentPage":t[0]||(t[0]=e=>n(d).pageNumber=e),"page-size":n(d).pageSize,"onUpdate:pageSize":t[1]||(t[1]=e=>n(d).pageSize=e),"page-sizes":n(d).pageSizes,small:n(d).small,disabled:n(d).disabled,background:n(d).background,layout:n(d).layout,total:n(d).total,"prev-text":"上一页","next-text":"下一页",onSizeChange:p,onCurrentChange:c},null,8,["current-page","page-size","page-sizes","small","disabled","background","layout","total"])}}}),q={class:"data-grid"},J={key:0,class:"data-grid-top px-2"},M={key:0,class:"top-action-bar"},X={key:1,class:"top-setting"},K=["onClick"],Q={key:2},Y={key:0},Z={key:0,class:"data-grid-bottom-right"},ee=L(e({name:"XtTable",__name:"index",props:{data:{},customConfig:{default:()=>({})},pageObject:{default:()=>({})},paginationAlign:{default:"right"}},emits:["pageChange","singleSelect","multipleSelect"],setup(e,{expose:a,emit:i}){const W=e,P=i,V=s({showDataGridTop:!0,showDataGridTopRight:!0,showDataGridTopLeft:!0,showDataGridBottom:!0,showPagination:!0,showSingleSelection:!1,showIndex:!0,showMultipleSelection:!1,showOperation:!0,indexAlignFixed:"left",operationAlignFixed:"right",operationAlign:"center",align:"center",selectionWidth:40,indexWidth:60,operationWidth:200,columns:[],rowButtons:[],selectable:()=>!0,combineBtnLink:!1});r((()=>{Object.assign(V,W.customConfig),H.value=V.columns.filter((e=>!e.deleted)),H.value.forEach((e=>{!1!==e.show&&L.value.push(e.prop)}))}));const L=t([]),H=t([]);const ee=t(null),te=t(-1);function ae(e){V.showSingleSelection&&(te.value=e.index),P("singleSelect",e)}const le=u((()=>V.rowButtons&&V.rowButtons.length?V.rowButtons.filter((e=>!e.putInCombineBox)):[])),oe=u((()=>V.rowButtons&&V.rowButtons.length?V.rowButtons.filter((e=>e.putInCombineBox)):[]));let ne=[];function ie(e){P("multipleSelect",e)}d((()=>{ne=[]}));const se=u((()=>{let e="";switch(W.paginationAlign){case"left":e="flex-start";break;case"center":e="center";break;default:e="flex-end"}return e}));function re(e){P("pageChange",JSON.parse(JSON.stringify(e)))}return a({clearSelection:function(){var e;null==(e=ee.value)||e.clearSelection()},toggleRowSelection:function(e,t){var a;null==(a=ee.value)||a.toggleRowSelection(e,t)},toggleAllSelection:function(){var e;null==(e=ee.value)||e.toggleAllSelection()},toggleRowExpansion:function(e,t){var a;null==(a=ee.value)||a.toggleRowExpansion(e,t)},setCurrentRow:function(e){var t;null==(t=ee.value)||t.setCurrentRow(e)},clearSort:function(){var e;null==(e=ee.value)||e.clearSort()},clearFilter:function(e){var t;null==(t=ee.value)||t.clearFilter(e)},doLayout:function(){var e;null==(e=ee.value)||e.doLayout()},sort:function(e,t){var a;null==(a=ee.value)||a.sort(e,t)}}),(e,t)=>{const a=E,i=D,s=$,r=G,u=N,d=T,W=A,P=O,ue=R,de=F,pe=I,ce=U,ge=p("auth");return l(),c("div",q,[n(V).showDataGridTop?(l(),c("div",J,[g(e.$slots,"top",{},(()=>[n(V).showDataGridTopLeft?(l(),c("div",M,[g(e.$slots,"top-left",{},void 0,!0)])):m("",!0),n(V).showDataGridTopRight?(l(),c("div",X,[g(e.$slots,"top-right",{},(()=>[f(r,{placement:"bottom-end",trigger:"click"},{reference:b((()=>[f(a,{name:"ep:operation",class:"cursor-pointer text-xl"})])),default:b((()=>[f(s,{modelValue:n(L),"onUpdate:modelValue":t[0]||(t[0]=e=>h(L)?L.value=e:null),class:"filter-column"},{default:b((()=>[(l(!0),c(w,null,x(n(H),((e,t)=>(l(),o(i,{key:t,value:e.prop,label:e.label},null,8,["value","label"])))),128))])),_:1},8,["modelValue"])])),_:1})]),!0)])):m("",!0)]),!0)])):m("",!0),v("div",{class:z(["data-grid-table",n(V).showDataGridTop?"mt-2":""])},[f(pe,j({ref_key:"dataGridRef",ref:ee,data:e.data,"highlight-current-row":"",border:"",class:"xt-table"},e.$attrs,{onCurrentChange:ae,onSelectionChange:ie}),{default:b((()=>[n(V).showSingleSelection?(l(),o(d,{key:0,width:n(V).selectionWidth,align:n(V).align},{default:b((e=>[f(u,{modelValue:n(te),"onUpdate:modelValue":t[1]||(t[1]=e=>h(te)?te.value=e:null),value:e.$index},null,8,["modelValue","value"])])),_:1},8,["width","align"])):m("",!0),n(V).showMultipleSelection?(l(),o(d,{key:1,type:"selection",width:n(V).selectionWidth,align:n(V).align,selectable:n(V).selectable},null,8,["width","align","selectable"])):m("",!0),n(V).showIndex?(l(),o(d,{key:2,fixed:n(V).indexAlignFixed,type:"index",width:n(V).indexWidth,label:"序号",align:n(V).align},null,8,["fixed","width","align"])):m("",!0),(l(!0),c(w,null,x(n(H),((t,a)=>(l(),c(w,{key:a},[n(L).includes(t.prop)?(l(),o(d,{key:0,align:t.align,width:t.width,"min-width":t.minWidth,label:t.label,sortable:t.sortable?!t.headerSlot:t.sortable,prop:t.prop,"show-overflow-tooltip":""},k({default:b((a=>[t.slot?g(e.$slots,t.slot,{key:0,row:a.row,prop:t.prop,column:a.column,index:a.$index},void 0,!0):t.click&&"function"==typeof t.click?g(e.$slots,"default",{key:1},(()=>[v("span",{class:"cursor-pointer text-[var(--el-color-primary)]",onClick:e=>t.click(a.row,a.$index)},y(0===a.row[t.prop]?0:a.row[t.prop]||"--"),9,K)]),!0):(l(),c("span",Q,y(0===a.row[t.prop]?0:a.row[t.prop]||"--"),1))])),_:2},[t.headerSlot?{name:"header",fn:b((({column:a,$index:l})=>[g(e.$slots,t.headerSlot,{column:a,index:l},void 0,!0)])),key:"0"}:void 0]),1032,["align","width","min-width","label","sortable","prop"])):m("",!0)],64)))),128)),n(le).length||n(oe).length?(l(),o(d,{key:3,fixed:n(V).operationAlignFixed,width:n(V).operationWidth,align:n(V).operationAlign,label:"操作"},{default:b((e=>[(l(!0),c(w,null,x(n(le),((t,a)=>(l(),c(w,{key:a},["function"!=typeof t.isShow||t.isShow(e.row)?S((l(),o(W,j({key:0,disabled:"function"==typeof t.isDisabled&&t.isDisabled(e.row),title:"function"==typeof t.showTitle?t.showTitle(e.row):""},t.attrs,{onClick:a=>t.click(e.row,e.$index)}),{default:b((()=>[t.onlyIcon?m("",!0):(l(),c("span",Y,y(t.name),1))])),_:2},1040,["disabled","title","onClick"])),[[ge,t.auth?t.auth:""]]):m("",!0)],64)))),128)),n(oe).length?(l(),o(de,{key:0,ref:"combineBoxDropdownRef","hide-on-click":!0,class:"combine-box-dropdown",trigger:"click",placement:"bottom-start"},{dropdown:b((()=>[f(ue,{class:"combine-box-dropdown-menu"},{default:b((()=>[(l(!0),c(w,null,x(n(oe),((t,a)=>(l(),o(P,j({key:a,title:"function"==typeof t.showTitle?t.showTitle(e.row):"",disabled:"function"==typeof t.isDisabled&&t.isDisabled(e.row)},t.attrs,{onClick:C((a=>function(e,t,a){if(oe.value.length){let l=!1;if("function"==typeof e.isDisabled&&(l=e.isDisabled(t)||!1),l)return void ne[a].show();e.click(t,a)}}(t,e.row,e.$index)),["stop"])}),{default:b((()=>[_(y(t.name),1)])),_:2},1040,["title","disabled","onClick"])))),128))])),_:2},1024)])),default:b((()=>[f(W,{link:n(V).combineBtnLink,type:"primary",plain:""},{default:b((()=>[_(" 更多 ")])),_:1},8,["link"])])),_:2},1536)):m("",!0)])),_:1},8,["fixed","width","align"])):m("",!0)])),_:3},16,["data"])],2),n(V).showDataGridBottom?(l(),c("div",{key:1,class:"data-grid-bottom mt-2 flex px-4",style:B({justifyContent:n(se)})},[g(e.$slots,"bottom",{},(()=>[n(V).showPagination?(l(),c("div",Z,[g(e.$slots,"bottom-left",{},(()=>[f(ce,{"page-object":e.pageObject,onPageChange:re},null,8,["page-object"])]),!0)])):m("",!0)]),!0)],4)):m("",!0)])}}}),[["__scopeId","data-v-401906b4"]]),te=v("div",{class:"mb-3 text-2xl"}," 表格封装-以配置项驱动的表格 ",-1),ae=v("div",null," 具体配置请在项目中查看 ",-1),le={class:"flex items-center justify-center"},oe={class:"flex items-center justify-center"},ne={class:"ml-3"},ie=e({__name:"table",setup(e){const a=s({columns:[{label:"日期",prop:"date",align:"center",sortable:!1,slot:"date",headerSlot:"dateHeader"},{label:"姓名",prop:"name",align:"center",sortable:!1,click:e=>{W.success("点击了姓名")}},{label:"地址",prop:"address",align:"center",sortable:!1}],rowButtons:[{name:"查看",click:e=>{},attr:{type:"primary"}},{name:"添加",click:e=>{},putInCombineBox:!0}]}),o=t([]),i=s({total:0,pageSize:10,pageNumber:1});function u(){P({current:i.pageNumber-1,pageSize:i.pageSize}).then((e=>{o.value=e.result.rows,i.total=e.result.total}))}function d(e){i.pageSize=e.pageSize,i.pageNumber=e.pageNumber,u()}return r((()=>{u()})),(e,t)=>{const s=H,r=A,u=E,p=V,g=ee;return l(),c(w,null,[f(s,null,{default:b((()=>[te,ae])),_:1}),f(s,null,{default:b((()=>[f(g,{data:n(o),"custom-config":n(a),"page-object":n(i),onPageChange:d},{"top-left":b((()=>[v("div",null,[f(r,{type:"primary"},{default:b((()=>[_(" 我是自定义内容 ")])),_:1})])])),dateHeader:b((({column:e,index:t})=>[v("div",le,[f(p,{size:15},{default:b((()=>[f(u,{name:"ep:alarm-clock"})])),_:1}),_(" "+y(t)+"-"+y(e.label)+" 自定义表头 ",1)])])),date:b((({row:e})=>[v("div",oe,[f(p,{size:20},{default:b((()=>[f(u,{name:"ep:alarm-clock"})])),_:1}),v("span",ne,y(e.date)+"-自定义内容",1)])])),_:1},8,["data","custom-config","page-object"])])),_:1})],64)}}});export{ie as default};
